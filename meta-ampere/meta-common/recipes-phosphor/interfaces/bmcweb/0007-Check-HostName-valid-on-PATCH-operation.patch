From 3920653c8036c9194a4fee1bc3f9dfedbb511ec0 Mon Sep 17 00:00:00 2001
From: Hieu Huynh <hieuh@os.amperecomputing.com>
Date: Fri, 12 May 2023 10:33:07 +0700
Subject: [PATCH 07/14] Check HostName valid on PATCH operation

The HostName in EthernetInterface should be checked before PATCH
operation. This will return an error when the HostName can not be
patched.

Signed-off-by: Hieu Huynh <hieuh@os.amperecomputing.com>
---
 redfish-core/lib/ethernet.hpp | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/redfish-core/lib/ethernet.hpp b/redfish-core/lib/ethernet.hpp
index 03b23e14..3f5f7d2e 100644
--- a/redfish-core/lib/ethernet.hpp
+++ b/redfish-core/lib/ethernet.hpp
@@ -2095,6 +2095,11 @@ inline void requestEthernetInterfacesRoutes(App& app)
 
             if (hostname)
             {
+                if (!isHostnameValid(*hostname))
+                {
+                    messages::propertyValueFormatError(asyncResp->res, *hostname, "HostName");
+                    return;
+                }
                 handleHostnamePatch(*hostname, asyncResp);
             }
 
-- 
2.34.1

