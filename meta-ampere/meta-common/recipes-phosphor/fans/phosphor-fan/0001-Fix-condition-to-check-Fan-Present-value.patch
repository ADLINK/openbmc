From b1272d842b4ce865e33ba11406b919588e11b965 Mon Sep 17 00:00:00 2001
From: Chanh Nguyen <chnguyen@amperecomputing.com>
Date: Thu, 23 Sep 2021 02:32:39 +0000
Subject: [PATCH 1/4] Fix condition to check Fan Present value

Signed-off-by: Chanh Nguyen <chnguyen@amperecomputing.com>
---
 presence/tach.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/presence/tach.cpp b/presence/tach.cpp
index 7304676..254e295 100644
--- a/presence/tach.cpp
+++ b/presence/tach.cpp
@@ -82,7 +82,7 @@ bool Tach::start()
 
     // Set the initial state of the sensor.
     currentState = std::any_of(state.begin(), state.end(), [](const auto& s) {
-        return std::get<double>(s) != 0;
+        return std::get<double>(s) > 500;
     });
 
     return currentState;
@@ -108,7 +108,7 @@ bool Tach::present()
     }
 
     return std::any_of(values.begin(), values.end(),
-                       [](const auto& v) { return v != 0; });
+                       [](const auto& v) { return v > 500; });
 }
 
 void Tach::propertiesChanged(size_t sensor, sdbusplus::message::message& msg)
@@ -132,7 +132,7 @@ void Tach::propertiesChanged(size_t sensor,
 
         auto newState =
             std::any_of(state.begin(), state.end(),
-                        [](const auto& s) { return std::get<double>(s) != 0; });
+                        [](const auto& s) { return std::get<double>(s) > 500; });
 
         if (currentState != newState)
         {
-- 
2.25.1

